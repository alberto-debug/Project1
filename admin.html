<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard ‚Äî ANU SMS System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css" />
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #f9fafb;
    }

    .app {
      display: grid;
      grid-template-columns: 260px 1fr;
      grid-template-rows: 70px 1fr;
      grid-template-areas:
        "topbar topbar"
        "sidebar content";
      height: 100vh;
      background: #f9fafb;
    }

    /* Modern Topbar */
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 32px;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
      z-index: 100;
    }

    .brand {
      font-size: 20px;
      font-weight: 700;
      color: #dc2626;
      letter-spacing: -0.3px;
    }

    .top-actions {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .user {
      padding: 8px 16px;
      background: #f3f4f6;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      color: #374151;
    }

    /* Modern Sidebar */
    .sidebar {
      grid-area: sidebar;
      background: #f8f9fa;
      border-right: 1px solid #e5e7eb;
      padding: 24px 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .nav-item {
      padding: 12px 16px;
      background: transparent;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.2s;
      text-align: left;
      font-family: 'Inter', sans-serif;
    }

    .nav-item:hover {
      background: #ffffff;
      color: #111827;
    }

    .nav-item.active {
      background: #dc2626;
      color: #ffffff;
      font-weight: 600;
      box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
    }

    /* Content Area */
    .content {
      grid-area: content;
      padding: 32px;
      overflow-y: auto;
    }

    .panel {
      display: none;
    }

    .panel.active {
      display: block;
    }

    header h1 {
      font-size: 28px;
      font-weight: 700;
      color: #111827;
      margin: 0 0 6px;
      letter-spacing: -0.5px;
    }

    header p {
      font-size: 15px;
      color: #6b7280;
      margin: 0 0 28px;
    }

    /* Modern Card */
    .card {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
      margin-bottom: 24px;
    }

    .card h3 {
      font-size: 18px;
      font-weight: 700;
      color: #111827;
      margin: 0 0 20px;
    }

    /* Grid Layouts */
    .grid-2 {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 24px;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    /* Form Elements */
    .field {
      margin-bottom: 16px;
    }

    .field label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 6px;
    }

    select, input[type="date"], input[type="time"], input[type="text"], input[type="number"], textarea {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      font-family: 'Inter', sans-serif;
      color: #111827;
      background: #f9fafb;
      transition: all 0.2s;
    }

    select:focus, input:focus, textarea:focus {
      outline: none;
      border-color: #dc2626;
      background: #ffffff;
      box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
    }

    textarea {
      resize: vertical;
    }

    .helper {
      font-size: 12px;
      color: #6b7280;
      text-align: right;
      margin-top: 4px;
    }

    /* Modern Buttons */
    .btn {
      padding: 10px 18px;
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Inter', sans-serif;
    }

    .btn:hover {
      background: #f9fafb;
      border-color: #d1d5db;
    }

    .btn.primary {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      color: #ffffff;
      border: none;
      font-weight: 600;
      box-shadow: 0 4px 14px rgba(220, 38, 38, 0.3);
    }

    .btn.primary:hover {
      background: linear-gradient(135deg, #b91c1c 0%, #991b1b 100%);
      box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
      transform: translateY(-1px);
    }

    .list-actions {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
    }

    .actions {
      display: flex;
      gap: 12px;
      margin-top: 16px;
    }

    /* Modern Table */
    .table-wrap {
      overflow-x: auto;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      margin-top: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 12px 16px;
      text-align: left;
      font-size: 14px;
      border-bottom: 1px solid #e5e7eb;
      color: #111827;
    }

    th {
      background: #f9fafb;
      font-weight: 600;
      color: #374151;
      text-transform: uppercase;
      font-size: 12px;
      letter-spacing: 0.5px;
    }

    td {
      color: #111827;
      font-weight: 500;
    }

    tr:last-child td {
      border-bottom: none;
    }

    tr:hover td {
      background: #f9fafb;
    }

    /* KPIs */
    .kpis {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 28px;
    }

    .kpi {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 24px;
      text-align: center;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .kpi::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #dc2626 0%, #b91c1c 100%);
    }

    .kpi:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px -8px rgba(220, 38, 38, 0.2);
    }

    .kpi-value {
      font-size: 42px;
      font-weight: 800;
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
      line-height: 1.2;
    }

    .kpi-label {
      font-size: 13px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Chart Container Styling */
    .chart-container {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
    }

    .chart-container h3 {
      font-size: 18px;
      font-weight: 700;
      color: #111827;
      margin: 0 0 20px;
      padding-bottom: 16px;
      border-bottom: 2px solid #f3f4f6;
    }

    canvas {
      max-width: 100%;
      height: auto !important;
    }

    /* Modal */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .modal[hidden] {
      display: none;
    }

    .modal-content {
      background: #ffffff;
      border-radius: 12px;
      padding: 28px;
      width: min(700px, 90vw);
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }

    .modal-content h3 {
      font-size: 20px;
      font-weight: 700;
      color: #111827;
      margin: 0 0 20px;
    }

    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-top: 24px;
    }

    .notice {
      padding: 12px 16px;
      background: #f9fafb;
      border-left: 3px solid #9ca3af;
      border-radius: 4px;
      font-size: 13px;
      color: #6b7280;
      margin-top: 16px;
    }

    .filters {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-bottom: 20px;
    }

    @media (max-width: 1200px) {
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .app {
        grid-template-columns: 1fr;
        grid-template-areas:
          "topbar"
          "content";
      }

      .sidebar {
        display: none;
      }

      .kpis {
        grid-template-columns: repeat(2, 1fr);
      }

      .filters, .grid-3 {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <nav class="topbar">
      <div class="brand">ANU SMS System</div>
      <div class="top-actions">
        <button class="btn primary" id="sendNowBtnTop">Send Now</button>
        <div class="user" id="userBadge">Admin</div>
        <a class="btn" href="index.html">Logout</a>
      </div>
    </nav>
    <aside class="sidebar">
      <button class="nav-item active" data-target="compose">Compose</button>
      <button class="nav-item" data-target="contacts">Contacts</button>
      <button class="nav-item" data-target="schedule">Schedule</button>
      <button class="nav-item" data-target="reports">Reports</button>
    </aside>
    <main class="content">
      <section id="compose" class="panel active">
        <header><h1>Compose SMS</h1><p>Send updates for classes, quizzes, lectures, and events.</p></header>
        <div class="grid-2">
          <div class="card">
            <h3>Recipients</h3>
            <div class="filters">
              <div class="field"><label>Department</label><select id="filterDepartment"><option value="">All</option></select></div>
              <div class="field"><label>Year of Study</label><select id="filterYear"><option value="">All</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></div>
              <div class="field"><label>Course Unit</label><select id="filterCourse"><option value="">All</option></select></div>
            </div>
            <div class="list-actions"><button class="btn" id="selectAll">Select All</button><button class="btn" id="clearAll">Clear</button></div>
            <div class="table-wrap">
              <table id="contactsTable"><thead><tr><th><input type="checkbox" id="toggleAll"></th><th>Name</th><th>Role</th><th>Department</th><th>Year</th><th>Course</th><th>Phone</th></tr></thead><tbody></tbody></table>
            </div>
          </div>
          <div class="card">
            <h3>Message</h3>
            <div class="field"><label>Template</label><select id="template"><option value="">Custom</option><option value="Reminder: Class update at {time} for {course}">Reminder: Class update at {time} for {course}</option><option value="Quiz alert: {course} quiz on {date}">Quiz alert: {course} quiz on {date}</option><option value="Event: {event} at {venue} on {date}">Event: {event} at {venue} on {date}</option></select></div>
            <div class="field"><label>SMS Content</label><textarea id="message" rows="8" maxlength="306" placeholder="Enter SMS (160 chars per SMS, concatenation allowed)"></textarea><div class="helper"><span id="charCount">0</span>/306 chars</div></div>
            <div class="actions"><button class="btn primary" id="sendNowBtn">Send Now</button><button class="btn" id="openSchedule">Schedule...</button></div>
            <div class="notice muted">Note: This prototype uses a simulated SMS gateway in your browser.</div>
          </div>
        </div>
      </section>
      <section id="contacts" class="panel">
        <header>
          <h1>Contact Management</h1>
          <p>Manage student and staff recipients</p>
        </header>
        
        <div class="card">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="margin: 0;">All Contacts</h3>
            <div class="list-actions" style="margin: 0;">
              <button class="btn" id="contactsEditToggle">Edit Mode</button>
              <button class="btn primary" id="addContactBtn" style="display:none">
                <span style="margin-right: 6px;">+</span> Add Contact
              </button>
            </div>
          </div>
          <div class="table-wrap">
            <table id="contactsTableFull">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Role</th>
                  <th>Department</th>
                  <th>Year</th>
                  <th>Course</th>
                  <th>Phone</th>
                  <th id="contactsActionsHead" style="display:none">Actions</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>
      <section id="schedule" class="panel">
        <header>
          <h1>Message Scheduler</h1>
          <p>Schedule messages for future delivery</p>
        </header>
        
        <div class="card">
          <h3>Create New Schedule</h3>
          
          <div class="grid-3" style="margin-bottom: 20px;">
            <div class="field">
              <label>üìÖ Date</label>
              <input type="date" id="schedDate" />
            </div>
            <div class="field">
              <label>‚è∞ Time</label>
              <input type="time" id="schedTime" />
            </div>
            <div class="field">
              <label>&nbsp;</label>
              <button class="btn primary" id="addSchedule" style="width: 100%; margin-top: 0;">
                Schedule Message
              </button>
            </div>
          </div>

          <div class="filters">
            <div class="field">
              <label>Department (Optional)</label>
              <select id="schedDept">
                <option value="">All Departments</option>
              </select>
            </div>
            <div class="field">
              <label>Year (Optional)</label>
              <select id="schedYear">
                <option value="">All Years</option>
                <option value="1">Year 1</option>
                <option value="2">Year 2</option>
                <option value="3">Year 3</option>
                <option value="4">Year 4</option>
              </select>
            </div>
            <div class="field">
              <label>Course Unit (Optional)</label>
              <select id="schedCourse">
                <option value="">All Courses</option>
              </select>
            </div>
          </div>

          <div class="field">
            <label>Message Content</label>
            <textarea id="schedMessage" rows="4" placeholder="Enter your message content here (optional if already filled in Compose tab)"></textarea>
          </div>
        </div>

        <div class="card">
          <h3>Scheduled Messages</h3>
          <div class="table-wrap">
            <table id="scheduleTable">
              <thead>
                <tr>
                  <th>Send At</th>
                  <th>Recipients</th>
                  <th>Preview</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>
      <section id="reports" class="panel">
        <header><h1>Analytics & Reports</h1><p>Track delivery, reach, and engagement metrics</p></header>
        
        <!-- KPI Cards -->
        <div class="kpis">
          <div class="kpi">
            <div class="kpi-value" id="kpiSent">0</div>
            <div class="kpi-label">Total Sent</div>
          </div>
          <div class="kpi">
            <div class="kpi-value" id="kpiDelivered">0</div>
            <div class="kpi-label">Delivered</div>
          </div>
          <div class="kpi">
            <div class="kpi-value" id="kpiFailed">0</div>
            <div class="kpi-label">Failed</div>
          </div>
          <div class="kpi">
            <div class="kpi-value" id="kpiScheduled">0</div>
            <div class="kpi-label">Scheduled</div>
          </div>
        </div>

        <!-- Charts -->
        <div class="grid-2">
          <div class="chart-container">
            <h3>Delivery by Department</h3>
            <canvas id="deptChart" height="160"></canvas>
          </div>
          <div class="chart-container">
            <h3>Overall Delivery Status</h3>
            <canvas id="overallChart" height="160"></canvas>
          </div>
        </div>

        <!-- Recent Messages Table -->
        <div class="card">
          <h3>Recent Messages</h3>
          <div class="table-wrap">
            <table id="messagesTable">
              <thead>
                <tr>
                  <th>Time</th>
                  <th>Recipients</th>
                  <th>Status</th>
                  <th>Preview</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>
  <div class="modal" id="scheduleModal" hidden>
    <div class="modal-content"><h3>Schedule Message</h3>
      <div class="grid-3"><div class="field"><label>Date</label><input type="date" id="modalDate" /></div><div class="field"><label>Time</label><input type="time" id="modalTime" /></div><div class="field"><label>&nbsp;</label><button class="btn" id="confirmSchedule">Schedule</button></div></div>
      <div class="modal-actions"><button class="btn" id="closeModal">Close</button></div>
    </div>
  </div>
  <!-- Contact Edit/Add Modal -->
  <div class="modal" id="contactModal" hidden>
    <div class="modal-content">
      <h3 id="contactModalTitle">Add Contact</h3>
      <div class="grid-3">
        <div class="field"><label>Name</label><input type="text" id="contactName" /></div>
        <div class="field"><label>Role</label>
          <select id="contactRole"><option value="Student">Student</option><option value="Staff">Staff</option></select>
        </div>
        <div class="field"><label>Phone</label><input type="text" id="contactPhone" placeholder="+2547xxxxxxxx" /></div>
      </div>
      <div class="grid-3">
        <div class="field"><label>Department</label><input type="text" id="contactDept" /></div>
        <div class="field"><label>Year (1-4 for Students)</label><input type="number" id="contactYear" min="1" max="4" /></div>
        <div class="field"><label>Course Unit</label><input type="text" id="contactCourse" /></div>
      </div>
      <input type="hidden" id="contactId" />
      <div class="modal-actions">
        <button class="btn" id="contactCancelBtn">Cancel</button>
        <button class="btn primary" id="contactSaveBtn">Save</button>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="assets/js/mockSmsGateway.js"></script>
  <script src="assets/js/app-admin.js"></script>
</body>
</html>
